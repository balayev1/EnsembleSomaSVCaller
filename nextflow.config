params {
    input = "samples.csv"
    outdir = "/scratch.global/balay011/SomaticSV_outs"
    
    // Path to your BED file (e.g., exome targets or specific regions)
    bed_file = "/path/to/targets.bed" 
    
    fasta = "/path/to/ref.fa"
    allele_res = "/path/to/alleles/"
    loci_res = "/path/to/loci/"
    gc_file = "/path/to/gc_file.txt"
    rt_file = "/path/to/rt_file.txt"
    
    // ASCAT Settings
    genome_ver = "hg38" 
}

process {
    withName: ASCAT {
        label 'process_medium'
        cpus   = 8
        // Using the dynamic memory logic for retries
        memory = { 32.GB * task.attempt } 
        errorStrategy = 'retry'
        maxRetries = 1
        
        ext.args = [
            gender: { meta.gender },
            genomeVersion: "${params.genome_ver}"
        ]

        publishDir = [
            path: { "${params.outdir}/ascat/${meta.id}" },
            mode: 'copy'
        ]
    }
}

singularity {
    enabled = true
    autoMounts = true
    runOptions = '--bind /projects/standard/aventeic/balay011,/scratch.global/balay011'
}